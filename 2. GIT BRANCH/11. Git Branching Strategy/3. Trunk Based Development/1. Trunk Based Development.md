# ğŸŒ³ Trunk Based Development

> **Ringkasan Singkat:** Model branching di source control dimana developer berkolaborasi pada satu branch utama yang disebut 'trunk' (atau 'main'), menghindari pembuatan branch development jangka panjang lainnya.

---

## ğŸ“š Daftar Isi

- [Pengenalan](#pengenalan)
- [Mengapa Trunk Based Development?](#mengapa-trunk-based-development)
- [Cara Kerja TBD](#cara-kerja-tbd)
- [Keuntungan TBD](#keuntungan-tbd)
- [Klaim dan Keunggulan](#klaim-dan-keunggulan)
- [Hal Penting yang Perlu Diperhatikan](#hal-penting-yang-perlu-diperhatikan)
- [Sejarah TBD](#sejarah-tbd)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

**Trunk Based Development (TBD)** adalah strategi git branching yang saat ini sedang populer di kalangan developer profesional.

### âœ¨ Karakteristik Utama:

- Developer bekerja pada **satu branch utama** yang disebut `trunk` atau `main`
- Menghindari branch development jangka panjang
- Fokus pada **kesederhanaan** dan **kecepatan delivery**
- Menghindari "merge hell" (konflik merge yang rumit)
- Build tidak akan rusak (broken)

> ğŸ’¡ **Catatan:** Istilah `main` digunakan oleh komunitas Git sejak 2020, sebelumnya dikenal dengan `master`

### ğŸ“– Referensi Lengkap:
- https://trunkbaseddevelopment.com/

---

<a name="mengapa-trunk-based-development"></a>
## ğŸ¤” Mengapa Trunk Based Development?

### âŒ Masalah dengan Branch Banyak:

Ketika kita membuat **banyak branch jangka panjang** yang terpisah dari branch utama, beberapa masalah akan muncul:

- **Konflik merge** yang rumit dan memakan waktu
- Sulit melacak perubahan kode
- Proses integrasi menjadi lambat
- Tim kehilangan sinkronisasi

### âœ… Solusi TBD:

Dengan TBD, semua orang bekerja di branch yang sama, sehingga:

- Integrasi kode menjadi **lebih mudah**
- Konflik terdeteksi **lebih cepat**
- Delivery menjadi **lebih cepat**
- Tim selalu **tersinkronisasi**

---

<a name="cara-kerja-tbd"></a>
## ğŸ› ï¸ Cara Kerja TBD

### 1ï¸âƒ£ Untuk Tim Kecil (Small Teams)

```mermaid
gitGraph
    commit id: "Initial commit"
    commit id: "Dev A: Feature 1"
    commit id: "Dev B: Feature 2"
    commit id: "Dev A: Fix bug"
    commit id: "Dev C: Feature 3"
    commit id: "Dev B: Update docs"
```

**Penjelasan:**
- Developer langsung commit ke branch `main`
- Tidak ada branch terpisah
- Cocok untuk tim 2-5 orang
- Commit dilakukan beberapa kali sehari

### 2ï¸âƒ£ Untuk Tim Besar (Scaled Teams)

```mermaid
gitGraph
    commit id: "Initial"
    branch feature-1
    checkout feature-1
    commit id: "Work on feature 1"
    commit id: "Complete feature 1"
    checkout main
    merge feature-1 tag: "1-2 hari"
    
    branch feature-2
    checkout feature-2
    commit id: "Work on feature 2"
    checkout main
    merge feature-2 tag: "1-2 hari"
    
    branch feature-3
    checkout feature-3
    commit id: "Work on feature 3"
    checkout main
    merge feature-3 tag: "1-2 hari"
```

**Penjelasan:**
- Menggunakan **short-lived feature branch** (branch berumur pendek)
- Branch hanya hidup **1-2 hari** maksimal
- Setelah code review selesai, langsung merge ke `main`
- Cocok untuk tim lebih dari 5 orang

---

<a name="keuntungan-tbd"></a>
## ğŸ Keuntungan TBD

### 1. ğŸ”„ Continuous Integration (CI)

TBD adalah kunci utama untuk CI yang sukses:

- Developer commit ke trunk **minimal 1x dalam 24 jam**
- Setiap commit di-test secara otomatis
- Codebase selalu dalam kondisi **siap release**

### 2. ğŸš€ Continuous Delivery (CD)

Dengan TBD, Continuous Delivery menjadi mudah:

- Kode selalu siap untuk di-deploy
- Release bisa dilakukan **kapan saja**
- Mengurangi risiko deployment

### 3. ğŸ‘¥ Kolaborasi Tim Lebih Baik

- Semua developer bekerja di tempat yang sama
- Lebih mudah melihat pekerjaan orang lain
- Konflik terdeteksi lebih awal

### 4. âš¡ Delivery Lebih Cepat

- Tidak ada waktu terbuang untuk merge branch besar
- Feature bisa dirilis lebih cepat
- Feedback dari user lebih cepat didapat

---

<a name="klaim-dan-keunggulan"></a>
## ğŸ“‹ Klaim dan Keunggulan

### âœ… Yang Harus Dilakukan:

1. **Pilih TBD daripada GitFlow**
   - GitFlow menggunakan banyak branch jangka panjang
   - TBD lebih sederhana dan efisien

2. **Gunakan Pull Request (PR) untuk Code Review**
   - Feature branch hanya hidup **sangat singkat**
   - Branch dibuat oleh **satu developer** saja
   - Bisa dikerjakan solo, pair programming, atau mob programming

3. **Commit/Push Langsung ke Trunk** (untuk tim sangat kecil)
   - Tanpa feature branch
   - Langsung commit ke `main`

### ğŸ›¡ï¸ Teknik Pendukung:

- **Feature Flags:** Menyembunyikan fitur yang belum selesai
- **Branch by Abstraction:** Teknik refactoring untuk perubahan besar
- **"Don't Break the Build":** Jangan sampai merusak build yang sudah ada

### ğŸ’» Interpretasi "Dev Workstation":

Development bisa dilakukan di:
- Virtual Machine (VM)
- Dev Container (Docker)
- Local machine
- Cloud development environment

---

<a name="hal-penting-yang-perlu-diperhatikan"></a>
## âš ï¸ Hal Penting yang Perlu Diperhatikan

### 1. ğŸ” Short-lived Feature Branches

**Kapan digunakan:**
- Untuk code review sebelum merge
- Untuk CI/CD checking
- **Bukan** untuk membuat artifact atau publikasi

**Aturan penting:**
- Branch **hanya hidup 1-2 hari**
- Setelah review selesai, **langsung merge**
- Tim sangat kecil bisa commit langsung tanpa branch

### 2. ğŸ¯ Release Branches

Ada dua strategi release:

#### **Strategi A: Release Branch**

```mermaid
gitGraph
    commit id: "Feature A"
    commit id: "Feature B"
    branch release-1.0
    checkout release-1.0
    commit id: "Hardening"
    commit id: "Bug fixes"
    checkout main
    commit id: "Feature C"
    commit id: "Feature D"
    branch release-1.1
    checkout release-1.1
    commit id: "Hardening"
    commit id: "Bug fixes"
```

**Penjelasan:**
- Branch release dipotong dari trunk **just-in-time**
- Di-"hardening" sebelum release
- Dihapus setelah beberapa waktu release

#### **Strategi B: Release dari Trunk**

```mermaid
gitGraph
    commit id: "Feature A"
    commit id: "Feature B" tag: "v1.0"
    commit id: "Feature C"
    commit id: "Feature D" tag: "v1.1"
    commit id: "Feature E"
    commit id: "Feature F" tag: "v1.2"
```

**Penjelasan:**
- Langsung release dari `main`
- Menggunakan strategi **"fix forward"** untuk bug
- Cocok untuk tim dengan throughput tinggi

### 3. ğŸ­ Teknik Pendukung TBD

**Branch by Abstraction:**
- Untuk perubahan yang memakan waktu lama
- Membuat abstraction layer saat refactoring

**Feature Flags:**
- Menyembunyikan fitur yang belum selesai
- Kontrol release fitur dengan lebih fleksibel
- Memungkinkan **concurrent development** untuk beberapa release

### 4. ğŸ¤– Build Server

**Wajib untuk tim > 2 developer:**

- Verifikasi setiap commit tidak merusak build
- Test otomatis setelah commit ke trunk
- Test sebelum merge dari feature branch

### 5. ğŸ“ˆ Skalabilitas

**Bukti skalabilitas TBD:**

- **Google** menggunakan TBD dengan **35,000 developer**
- Semua dalam **satu monorepo trunk**
- Tim bisa flexibel bertambah atau berkurang
- Tidak mempengaruhi throughput atau kualitas

### 6. ğŸ”„ Perbandingan dengan Model Lain

```mermaid
graph TB
    subgraph "Trunk Based Development"
        A1[main/trunk] --> B1[commit langsung]
        A1 --> C1[short-lived branch 1-2 hari]
    end
    
    subgraph "GitFlow"
        A2[main] --> B2[develop]
        B2 --> C2[feature branches]
        B2 --> D2[release branches]
        B2 --> E2[hotfix branches]
    end
    
    style A1 fill:#90EE90
    style A2 fill:#FFB6C1
```

**GitHub Flow:**
- Mirip dengan TBD
- Perbedaan kecil: tempat melakukan release

**GitFlow:**
- Sangat berbeda dengan TBD
- GitFlow menggunakan banyak branch jangka panjang
- Developer dari ClearCase, Subversion, Perforce, StarTeam akan merasa TBD sangat berbeda

### 7. ğŸ“– Dukungan Publikasi

TBD didukung oleh buku-buku best-selling:

- **"Continuous Delivery"**
- **"DevOps Handbook"**

> ğŸ’¡ TBD sudah tidak controversial lagi di industri software modern!

---

<a name="sejarah-tbd"></a>
## ğŸ“œ Sejarah TBD

### ğŸŒ² Asal Usul Nama

**"Trunk"** berasal dari konsep pohon yang tumbuh:

```mermaid
graph TD
    A[ğŸŒ³ Trunk/Batang Utama<br/>Paling tebal & panjang] --> B[ğŸŒ¿ Branch 1<br/>Lebih kecil]
    A --> C[ğŸŒ¿ Branch 2<br/>Lebih kecil]
    A --> D[ğŸŒ¿ Branch 3<br/>Lebih kecil]
    B --> E[ğŸƒ Sub-branch]
    C --> F[ğŸƒ Sub-branch]
    
    style A fill:#8B4513,color:#fff
    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#90EE90
    style E fill:#98FB98
    style F fill:#98FB98
```

**Filosofi:**
- **Trunk (batang)** adalah bagian paling tebal dan panjang
- **Branches (cabang)** lebih kecil dan pendek
- Ini melambangkan bahwa branch utama adalah yang paling penting

### â° Timeline Sejarah

```mermaid
timeline
    title Sejarah Trunk Based Development
    1980s : TBD mulai dipertimbangkan secara taktis
          : Konsep awal branching strategy
    1990s : TBD menjadi branching model yang dikenal
          : Mulai diterapkan di perusahaan
    2000s : Google & Facebook adopsi TBD skala besar
          : Terbukti scalable untuk ribuan developer
    2010s : TBD menjadi mainstream dengan DevOps
          : Buku Continuous Delivery mempopulerkan TBD
    2020s : TBD menjadi best practice industri
          : Diadopsi secara luas di berbagai perusahaan
```

### ğŸ¢ Adopsi Perusahaan Besar

```mermaid
graph LR
    A[ğŸ¢ Perusahaan Besar] --> B[Google<br/>35,000+ developers]
    A --> C[Facebook<br/>Ribuan developers]
    A --> D[Netflix]
    A --> E[Amazon]
    A --> F[Microsoft]
    
    style A fill:#4169E1,color:#fff
    style B fill:#90EE90
    style C fill:#90EE90
    style D fill:#90EE90
    style E fill:#90EE90
    style F fill:#90EE90
```

### ğŸ”§ Evolusi Teknologi

Selama **30+ tahun**, perkembangan teknologi source control dan tools telah membuat TBD:

- Lebih mudah diterapkan
- Lebih efisien
- Lebih banyak diadopsi

Namun tetap menjadi branching model yang **konsisten dipilih** oleh banyak developer selama bertahun-tahun.

---

## ğŸ“ Kesimpulan untuk Pemula

### ğŸŒŸ Mulai dari Mana?

**Untuk Pemula:**

```mermaid
graph LR
    A[ğŸ“š Mulai Belajar TBD] --> B[ğŸ‘¥ Tim Kecil 2-3 orang]
    B --> C[âœï¸ Commit langsung ke main]
    C --> D[ğŸ”„ Commit minimal 1x/hari]
    D --> E[âœ… Test sebelum commit]
    E --> F[ğŸ‰ Mahir TBD Dasar]
    
    style A fill:#4169E1,color:#fff
    style F fill:#32CD32,color:#fff
```

**Setelah Mahir:**

```mermaid
graph LR
    A[ğŸ‰ Mahir TBD Dasar] --> B[ğŸŒ¿ Short-lived feature branch]
    B --> C[ğŸ” Pull Request & Code Review]
    C --> D[ğŸ¤– Setup CI/CD Pipeline]
    D --> E[ğŸš© Feature Flags]
    E --> F[â­ TBD Expert]
    
    style A fill:#32CD32,color:#fff
    style F fill:#FFD700,color:#000
```

### ğŸ’ª Tips Sukses TBD:

- âœ… **Commit kecil-kecil** dan sering
- âœ… **Test sebelum commit**
- âœ… **Code review cepat** (jangan biarkan PR menunggu lama)
- âœ… **Komunikasi tim** yang baik
- âœ… **Automated testing** yang solid
- âŒ **Jangan buat branch** yang hidup lebih dari 2 hari
- âŒ **Jangan commit** kode yang rusak

---

## ğŸ“š Resources Tambahan

- ğŸŒ **Website Resmi:** https://trunkbaseddevelopment.com/
- ğŸ“– **Buku:** "Continuous Delivery" by Jez Humble
- ğŸ“– **Buku:** "DevOps Handbook" by Gene Kim

---

**Happy Coding! ğŸš€**
